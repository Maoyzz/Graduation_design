package myz.graduation_design.httpservice;import android.util.Log;import java.io.IOException;import okhttp3.Authenticator;import okhttp3.Request;import okhttp3.Response;import okhttp3.Route;/** * Created by yiting.lu on 2017/11/24. */public class TokenAuthenticator implements Authenticator {    @Override    public Request authenticate(Route route, Response response) throws IOException {        int code = response.code();        Log.e("lyt1", "authenticate: " + code );//        if (code == 401){//            //request with username &//            UserLoader mUserLoader = new UserLoader();//            retrofit2.Response<LoginModel> responseRefresh = mUserLoader.refreshSession(DeviceUtils.getDeviceUid(QiyunApplication.getInstance()), "q", 1);//            if (responseRefresh.body().error.ErrorCode == 0){//                SharedPreferenceUtils.putString(QiyunApplication.getInstance(), SharedPreferenceUtils.SESSION_KEY, responseRefresh.body().SessionKey);//                Request newRequest = addSessionKey(response.request());//                return newRequest;//            }else{//                Intent intent = new Intent(QiyunApplication.getInstance(), LoginActivity.class);//                intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);//                QiyunApplication.getInstance().startActivity(intent);//            }//        }        return null;    }}